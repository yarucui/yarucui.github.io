---
// src/layouts/MainLayout.astro
const { title } = Astro.props;
---

<html lang="zh">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>{title} | Your Name</title>

		<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500&family=Inter:wght@300;400&display=swap" rel="stylesheet">

		<!-- 防止闪烁：页面加载前立即应用主题 -->
		<script is:inline>
			(function () {
				const saved = localStorage.getItem('theme');
				const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
				const theme = saved || (prefersLight ? 'light' : 'dark');
				document.documentElement.setAttribute('data-theme', theme);
			})();
		</script>
	</head>

	<body>
		<nav>
			<a href="/">Home</a>
			<a href="/about">About</a>
			<a href="/projects">Projects</a>
			<a href="/notes">Notes</a>

			<button id="theme-toggle" type="button" aria-label="Toggle theme">
				<span class="sun">☼</span>
				<span class="moon">☾</span>
			</button>
		</nav>

		<main>
			<slot />
		</main>

		<footer>
			<div class="social-links">
				<a href="https://github.com/yourusername" target="_blank">GitHub</a>
				<a href="/cv.pdf">CV</a>
				<a href="mailto:hello@example.com">Email</a>
			</div>
		</footer>

		<script>
			const btn = document.getElementById('theme-toggle');

			function setTheme(theme) {
				document.documentElement.setAttribute('data-theme', theme);
				localStorage.setItem('theme', theme);
			}

			btn?.addEventListener('click', () => {
				const current = document.documentElement.getAttribute('data-theme');
				setTheme(current === 'light' ? 'dark' : 'light');
			});
		</script>
	</body>
</html>

<style is:global>
/* =========================
   THEME VARIABLES
========================= */

:root[data-theme="dark"] {
	--bg: #0a0a0a;
	--text: #f2f2f2;
	--accent: #ff4d80;
	--border: rgba(255,255,255,0.1);
	--dot: rgba(255,77,128,0.05);
}

:root[data-theme="light"] {
	--bg: #fff8f1;
	/* --text: #2d2327; */
	--text: #3c5365;

	--accent: #d44d7d;
	--border: rgba(212,77,125,0.2);
	--dot: rgba(212,77,125,0.08);
}

/* =========================
   GLOBAL
========================= */

html, body {
	margin: 0;
	padding: 0;
	min-height: 100vh;
	background-color: var(--bg);
	color: var(--text);
	transition: background-color 0.4s ease, color 0.4s ease;
}

body {
	font-family: 'Inter', sans-serif;
	display: flex;
	flex-direction: column;
	align-items: center;

	background-image:
		radial-gradient(circle at 0% 0%, var(--dot) 0%, transparent 40%),
		radial-gradient(circle at 100% 100%, var(--dot) 0%, transparent 40%);
	background-attachment: fixed;
}

/* =========================
   NAV
========================= */

nav {
	margin-top: 3rem;
	font-family: 'Cormorant Garamond', serif;
	display: flex;
	align-items: center;
	gap: 1.5rem;
}

nav a {
	color: var(--text);
	text-decoration: none;
	transition: color 0.3s ease;
}

nav a:hover {
	color: var(--accent);
}

/* =========================
   TOGGLE BUTTON
========================= */

#theme-toggle {
	background: none;
	border: 1px solid var(--border);
	color: var(--text);
	cursor: pointer;
	padding: 6px 14px;
	border-radius: 999px;
	transition: all 0.3s ease;
}

#theme-toggle:hover {
	border-color: var(--accent);
}

.sun { display: none; }
.moon { display: inline; }

:root[data-theme="light"] .sun { display: inline; }
:root[data-theme="light"] .moon { display: none; }

/* =========================
   MAIN
========================= */

main {
	flex: 1;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	width: 100%;
	max-width: 800px;
	padding: 2rem;
}

/* =========================
   FOOTER
========================= */

footer {
	padding: 3rem 0;
}

.social-links a {
	color: var(--text);
	text-decoration: none;
	margin: 0 1rem;
	font-size: 0.8rem;
	letter-spacing: 2px;
	opacity: 0.7;
	transition: opacity 0.3s ease;
}

.social-links a:hover {
	opacity: 1;
	color: var(--accent);
}
</style>
