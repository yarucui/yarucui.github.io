---
import { getCollection } from 'astro:content';
import MainLayout from '../layouts/Layout.astro';

const allNotes = await getCollection('notes');
// 按日期排序
const sortedNotes = allNotes.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---
<MainLayout title="Study Notes">
    <h1 class="serif">Academic Archive</h1>
    <div class="notes-list">
        {sortedNotes.map(note => (
            <a href={`/notes/${note.slug}`} class="note-item">
                <span class="date">{note.data.pubDate.toLocaleDateString()}</span>
                <h3>{note.data.title}</h3>
                <p>{note.data.description}</p>
            </a>
        ))}
    </div>
</MainLayout>

<style>
    .notes-list { margin-top: 3rem; width: 100%; }
    .note-item { 
        display: block; padding: 2rem 0; 
        border-bottom: 1px solid var(--border);
        text-decoration: none; color: inherit;
        transition: 0.3s;
    }
    .note-item:hover h3 { color: var(--accent); }
    .date { font-size: 0.8rem; color: #666; }
    h3 { font-family: 'Cormorant Garamond', serif; font-size: 1.8rem; margin: 0.5rem 0; }
</style>